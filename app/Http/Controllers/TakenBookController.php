<?php namespace App\Http\Controllers; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use App\Models\TakenBook; use App\Models\Book; use App\Models\LibraryMember; class TakenBookController extends Controller { public function index() { $taken_books = TakenBook::all(); $list = true;return view('taken_books.index', compact('taken_books', 'list')); } public function create() { $book_ids = Book::all(); $library_member_ids = LibraryMember::all(); return view('taken_books.create',compact('book_ids','library_member_ids')); } public function store(Request $request) { $this->validate($request, [ 'book_id' => 'required', 'qty' => 'required', 'library_member_id' => 'required', 'taken_date' => 'required', 'returning_date' => 'required', ]); $takenbook = new TakenBook(); $takenbook->fill($request->all()); $takenbook->save(); return redirect()->route('taken_books.index'); } public function show(TakenBook $takenbook) { return view('taken_books.show', compact('takenbook',)); } public function edit(TakenBook $takenbook) { $book_ids = Book::all(); $library_member_ids = LibraryMember::all(); return view('taken_books.edit', compact('takenbook','book_ids','library_member_ids')); } public function update(Request $request, TakenBook  $takenbook) { $this->validate($request, [ 'book_id' => 'required', 'qty' => 'required', 'library_member_id' => 'required', 'taken_date' => 'required', 'returning_date' => 'required', ]); $takenbook->book_id = $request->book_id; $takenbook->qty = $request->qty; $takenbook->library_member_id = $request->library_member_id; $takenbook->taken_date = $request->taken_date; $takenbook->returning_date = $request->returning_date; $takenbook->save(); session()->flash('message', 'Record updated successfully.'); return redirect()->route('taken_books.edit' , $takenbook->id); } public function destroy(TakenBook $takenbook) { $takenbook->delete(); session()->flash('success', 'Deleted Successfully'); return redirect()->route('taken_books.index'); } } ?>