<?php namespace App\Http\Controllers; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use App\Models\PutBack; use App\Models\TakenBook; class PutBackController extends Controller { public function index() { $putbacks = PutBack::all(); $list = true;return view('putbacks.index', compact('putbacks', 'list')); } public function create() { $taken_book_ids = TakenBook::all(); return view('putbacks.create',compact('taken_book_ids')); } public function store(Request $request) { $this->validate($request, [ 'taken_book_id' => 'required', 'returned_date' => 'required', 'note' => 'required', ]); $putback = new PutBack(); $putback->fill($request->all()); $putback->save(); return redirect()->route('putbacks.index'); } public function show(PutBack $putback) { return view('putbacks.show', compact('putback',)); } public function edit(PutBack $putback) { $taken_book_ids = TakenBook::all(); return view('putbacks.edit', compact('putback','taken_book_ids')); } public function update(Request $request, PutBack  $putback) { $this->validate($request, [ 'taken_book_id' => 'required', 'returned_date' => 'required', 'note' => 'required', ]); $putback->taken_book_id = $request->taken_book_id; $putback->returned_date = $request->returned_date; $putback->note = $request->note; $putback->save(); session()->flash('message', 'Record updated successfully.'); return redirect()->route('putbacks.edit' , $putback->id); } public function destroy(PutBack $putback) { $putback->delete(); session()->flash('success', 'Deleted Successfully'); return redirect()->route('putbacks.index'); } } ?>